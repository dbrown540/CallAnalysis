<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Call History Calendar</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            color: #333;
        }
        
        #calendar-container {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Calendar styles will be added by the script */
    </style>
</head>
<body>
    <h1>Call History Calendar</h1>
    <div id="calendar-container"></div>
    
    <script>
        // Call Calendar Formatter Script
        
        // Utility function to format duration in minutes to mm:ss format
        function formatDuration(minutes) {
          const totalSeconds = Math.round(minutes * 60);
          const mins = Math.floor(totalSeconds / 60);
          const secs = totalSeconds % 60;
          return `${mins}:${secs.toString().padStart(2, '0')}`;
        }
        
        // Holiday and special dates function
        function getHolidays(year) {
          const holidays = {
            // Fixed date holidays
            "1/1": "New Year's Day",
            "2/14": "Valentine's Day",
            "3/17": "St. Patrick's Day",
            "4/1": "April Fool's Day",
            "7/4": "Independence Day",
            "10/31": "Halloween",
            "11/11": "Veterans Day",
            "12/24": "Christmas Eve",
            "12/25": "Christmas Day",
            "12/31": "New Year's Eve",
            
            // Special calendar for specific years (2023)
            "2023/11/23": "Thanksgiving",
            "2023/11/24": "Black Friday",
            "2023/12/25": "Christmas",
            
            // Special calendar for 2024
            "2024/1/15": "MLK Jr. Day",
            "2024/2/14": "Valentine's Day",
            "2024/2/19": "Presidents' Day",
            "2024/5/27": "Memorial Day",
            "2024/6/19": "Juneteenth",
            "2024/7/4": "Independence Day",
            "2024/9/2": "Labor Day",
            "2024/10/14": "Columbus Day",
            "2024/11/28": "Thanksgiving",
            "2024/11/29": "Black Friday",
            "2024/12/25": "Christmas",
            
            // Add custom special dates
            "2024/4/19": "Teddy's Birthday",
            "2024/11/10": "Eliza's Birthday",
            "2023/12/28": "Dad's Birthday",
            "2024/12/28": "Dad's Birthday",
            "2024/12/3": "TayTay's Birthday"
          };
          
          return holidays;
        }
        
        // Call data
        const call_data = {
"December 25, 2023": [["status", "Canceled"], ["missed_by", "incoming"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 5]],
    "December 26, 2023": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 15/60], ["incoming", 5], ["incoming", 15]],
    "December 27, 2023": [["status", "Canceled"], ["status", "Canceled"]],
    "December 28, 2023": [["status", "Canceled"], ["outgoing", 32], ["incoming", 2]],
    "December 29, 2023": [["status", "Canceled"], ["status", "Canceled"]],
    "December 30, 2023": [["status", "Canceled"]],
    "December 31, 2023": [["status", "Canceled"], ["outgoing", 38], ["missed_by", "incoming"], ["status", "Canceled"]],
    "January 1, 2024": [["status", "Canceled"], ["outgoing", 10]],
    "January 2, 2024": [["status", "Canceled"], ["incoming", 12]],
    "January 3, 2024": [["status", "Canceled"]],
    "January 4, 2024": [["status", "Canceled"], ["incoming", 8]],
    "January 5, 2024": [["outgoing", 6], ["missed_by", "incoming"], ["status", "Canceled"], ["missed_by", "incoming"]],
    "January 7, 2024": [["status", "Canceled"], ["outgoing", 7], ["incoming", 15]],
    "January 8, 2024": [["status", "Canceled"], ["incoming", 15]],
    "January 9, 2024": [["status", "Canceled"]],
    "January 10, 2024": [["status", "Canceled"], ["incoming", 7]],
    "January 11, 2024": [["status", "Canceled"], ["missed_by", "incoming"], ["status", "Canceled"]],
    "January 12, 2024": [["status", "Canceled"], ["status", "Canceled"], ["outgoing", 5], ["missed_by", "incoming"], ["status", "Canceled"], ["outgoing", 4]],
    "January 13, 2024": [["status", "Canceled"], ["incoming", 5], ["outgoing", 2]],
    "January 15, 2024": [["status", "Canceled"]],
    "January 16, 2024": [["outgoing", 2]],
    "January 17, 2024": [["status", "Canceled"], ["incoming", 3]],
    "January 18, 2024": [["status", "Canceled"]],
    "January 19, 2024": [["outgoing", 6], ["missed_by", "incoming"], ["status", "Canceled"]],
    "January 20, 2024": [["status", "Canceled"]],
    "January 21, 2024": [["status", "Canceled"], ["incoming", 7]],
    "January 22, 2024": [["status", "Canceled"], ["incoming", 9], ["missed_by", "incoming"], ["status", "Canceled"], ["status", "Canceled"]],
    "January 23, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "January 24, 2024": [["status", "Canceled"], ["incoming", 12]],
    "January 25, 2024": [["status", "Canceled"], ["outgoing", 12]],
    "January 26, 2024": [["status", "Canceled"]],
    "January 27, 2024": [["status", "Canceled"]],
    "January 28, 2024": [["status", "Canceled"], ["incoming", 4]],
    "January 29, 2024": [["status", "Canceled"]],
    "January 30, 2024": [["incoming", 23]],
    "January 31, 2024": [["outgoing", 1]],
    "February 1, 2024": [["status", "Canceled"]],
    "February 2, 2024": [["status", "Canceled"], ["incoming", 2]],
    "February 3, 2024": [["status", "Canceled"], ["outgoing", 15]],
    "February 4, 2024": [["status", "Canceled"], ["outgoing", 51/66], ["incoming", 15]],
    "February 5, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 3]],
    "February 6, 2024": [["status", "Canceled"]],
    "February 7, 2024": [["incoming", 9], ["status", "Canceled"]],
    "February 8, 2024": [["outgoing", 7/60], ["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"]],
    "February 9, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["outgoing", 5], ["incoming", 50/60]],
    "February 10, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "February 11, 2024": [["status", "Canceled"], ["outgoing", 7]],
    "February 12, 2024": [["status", "Canceled"]],
    "February 13, 2024": [["status", "Canceled"], ["incoming", 26], ["outgoing", 11/60]],
    "February 14, 2024": [["outgoing", 8], ["outgoing", 2]],
    "February 15, 2024": [["status", "Canceled"]],
    "February 16, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "February 17, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "February 18, 2024": [["status", "Canceled"], ["outgoing", 25/60], ["outgoing", 1], ["missed_by", "incoming"]],
    "February 19, 2024": [["status", "Canceled"], ["outgoing", 11], ["incoming", 9]],
    "February 20, 2024": [["status", "Canceled"]],
    "February 21, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "February 22, 2024": [["status", "Canceled"], ["outgoing", 51]],
    "February 23, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 3], ["outgoing", 17]],
    "February 24, 2024": [["status", "Canceled"]],
    "February 25, 2024": [["status", "Canceled"]],
    "February 26, 2024": [["status", "Canceled"], ["outgoing", 4]],
    "February 27, 2024": [["status", "Canceled"]],
    "February 28, 2024": [["status", "Canceled"], ["incoming", 10], ["incoming", 5]],
    "February 29, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 20], ["incoming", 1]],
    "March 1, 2024": [["status", "Canceled"]],
    "March 2, 2024": [["outgoing", 20]],
    "March 3, 2024": [["status", "Canceled"], ["outgoing", 9], ["incoming", 3]],
    "March 4, 2024": [["status", "Canceled"]],
    "March 5, 2024": [["status", "Canceled"], ["incoming", 3]],
    "March 6, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 10]],
    "March 10, 2024": [["status", "Canceled"]],
    "March 11, 2024": [["outgoing", 6]],
    "March 12, 2024": [["status", "Canceled"]],
    "March 13, 2024": [["status", "Canceled"]],
    "March 14, 2024": [["outgoing", 9], ["outgoing", 19]],
    "March 16, 2024": [["outgoing", 5/60], ["outgoing", 8/60]],
    "March 18, 2024": [["status", "Canceled"]],
    "March 19, 2024": [["status", "Canceled"]],
    "March 20, 2024": [["status", "Canceled"], ["incoming", 4], ["status", "Canceled"]],
    "March 21, 2024": [["status", "Canceled"]],
    "March 22, 2024": [["status", "Canceled"]],
    "March 23, 2024": [["status", "Canceled"]],
    "March 24, 2024": [["status", "Canceled"]],
    "March 26, 2024": [["status", "Canceled"]],
    "March 27, 2024": [["status", "Canceled"], ["incoming", 6], ["outgoing", 2]],
    "March 28, 2024": [["status", "Canceled"], ["outgoing", 15]],
    "March 29, 2024": [["outgoing", 11], ["status", "Canceled"]],
    "March 30, 2024": [["status", "Canceled"]],
    "March 31, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 1, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 2, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 8]],
    "April 3, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 4, 2024": [["status", "Canceled"]],
    "April 5, 2024": [["status", "Canceled"], ["status", "Canceled"], ["outgoing", 7]],
    "April 6, 2024": [["status", "Canceled"], ["incoming", 8]],
    "April 7, 2024": [["status", "Canceled"]],
    "April 8, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 31]],
    "April 9, 2024": [["status", "Canceled"]],
    "April 10, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 11]],
    "April 11, 2024": [["status", "Canceled"], ["outgoing", 22]],
    "April 12, 2024": [["status", "Canceled"]],
    "April 13, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 22]],
    "April 14, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 15, 2024": [["status", "Canceled"]],
    "April 16, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 17, 2024": [["outgoing", 8]],
    "April 18, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 19, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 3], ["incoming", 7]],
    "April 20, 2024": [["status", "Canceled"], ["outgoing", 16]],
    "April 21, 2024": [["missed_by", "incoming"], ["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 10]],
    "April 22, 2024": [["status", "Canceled"]],
    "April 23, 2024": [["outgoing", 19], ["status", "Canceled"]],
    "April 24, 2024": [["status", "Canceled"]],
    "April 25, 2024": [["outgoing", 9]],
    "April 26, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "April 27, 2024": [["outgoing", 1], ["status", "Canceled"]],
    "April 28, 2024": [["outgoing", 1], ["outgoing", 18], ["missed_by", "incoming"], ["status", "Canceled"]],
    "April 29, 2024": [["status", "Canceled"]],
    "April 30, 2024": [["status", "Canceled"]],
    "May 1, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 34]],
    "May 2, 2024": [["status", "Canceled"]],
    "May 3, 2024": [["outgoing", 8], ["outgoing", 4]],
    "May 4, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 5, 2024": [["status", "Canceled"], ["status", "Canceled"], ["outgoing", 4], ["incoming", 8], ["missed_by", "incoming"], ["missed_by", "incoming"], ["missed_by", "incoming"]],
    "May 6, 2024": [["status", "Canceled"], ["missed_by", "incoming"], ["outgoing", 2], ["outgoing", 15]],
    "May 7, 2024": [["status", "Canceled"]],
    "May 8, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 9, 2024": [["status", "Canceled"], ["status", "Canceled"], ["outgoing", 3]],
    "May 10, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 11, 2024": [["missed_by", "incoming"], ["missed_by", "incoming"], ["missed_by", "incoming"], ["missed_by", "incoming"], ["missed_by", "incoming"]],
    "May 12, 2024": [["incoming", 17], ["status", "Canceled"]],
    "May 14, 2024": [["status", "Canceled"]],
    "May 15, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 16, 2024": [["status", "Canceled"], ["outgoing", 11]],
    "May 17, 2024": [["status", "Canceled"]],
    "May 18, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 19, 2024": [["status", "Canceled"]],
    "May 20, 2024": [["status", "Canceled"], ["outgoing", 1], ["outgoing", 3/60], ["outgoing", 4]],
    "May 21, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 22, 2024": [["status", "Canceled"]],
    "May 23, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "May 24, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 24]],
    "May 25, 2024": [["status", "Canceled"]],
    "May 26, 2024": [
        ["status", "Canceled"],
        ["outgoing", 0.33],
        ["incoming", 1],
        ["status", "Canceled"],
        ["status", "Canceled"],
        ["missed_by", "incoming"],
        ["status", "Canceled"]
    ],
    "May 27, 2024": [["status", "Canceled"]],
    "May 28, 2024": [["outgoing", 24/60], ["outgoing", 4/60], ["outgoing", 6], ["missed_by", "incoming"]],
    "May 29, 2024": [["status", "Canceled"]],
    "May 30, 2024": [["status", "Canceled"], ["outgoing", 8]],
    "May 31, 2024": [
        ["status", "Canceled"],
        ["status", "Canceled"],
        ["status", "Canceled"],
        ["incoming", 2]    
    ],
    "June 1, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "June 2, 2024": [["status", "Canceled"], ["outgoing", 4], ["outgoing", 15]],
    "June 3, 2024": [["status", "Canceled"], ["outgoing", 5]],
    "June 4, 2024": [["status", "Canceled"], ["status", "Canceled"], ["incoming", 12]],
    "June 5, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 17]],
    "June 6, 2024": [["outgoing", 35]],
    "June 7, 2024": [["status", "Canceled"]],
    "June 8, 2024": [["status", "Canceled"]],
    "June 9, 2024": [["outgoing", 10]],
    "June 10, 2024": [["incoming", 6]],
    "June 12, 2024": [["status", "Canceled"]],
    "June 13, 2024": [["status", "Canceled"]],
    "June 14, 2024": [["status", "Canceled"], ["incoming", 18]],
    "June 15, 2024": [["incoming", 13]],
    "June 16, 2024": [["status", "Canceled"], ["incoming", 12]],
    "June 17, 2024": [["status", "Canceled"]],
    "June 19, 2024": [["status", "Canceled"]],
    "June 20, 2024": [["status", "Canceled"], ["incoming", 10]],
    "June 21, 2024": [["status", "Canceled"]],
    "June 22, 2024": [["status", "Canceled"], ["incoming", 12]],
    "June 23, 2024": [["status", "Canceled"]],
    "June 24, 2024": [["status", "Canceled"]],
    "June 25, 2024": [["status", "Canceled"], ["incoming", 26], ["missed_by", "incoming"]],
    "June 26, 2024": [["status", "Canceled"]],
    "June 27, 2024": [["status", "Canceled"]],
    "June 28, 2024": [["status", "Canceled"], ["incoming", 25]],
    "June 29, 2024": [["status", "Canceled"], ["incoming", 38]],
    "June 30, 2024": [["status", "Canceled"]],
    "June 1, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "July 2, 2024": [["status", "Canceled"], ["incoming", 19]],
    "July 3, 2024": [["status", "Canceled"], ["outgoing", 22/60], ["outgoing", 55/60], ["incoming", 10]],
    "July 4, 2024": [["status", "Canceled"], ["missed_by", "incoming"], ["status", ["Canceled"]], ["missed_by", "incoming"], ["status", "Canceled"], ["status", "Canceled"]],
    "July 5, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "July 6, 2024": [["status", "Canceled"], ["outgoing", 10], ["missed_by", "incoming"], ["status", "Canceled"], ["status", "Canceled"]],
    "July 7, 2024": [["status", "Canceled"]],
    "July 8, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "July 9, 2024": [["status", "Canceled"]],
    "July 10, 2024": [["status", "Canceled"], ["incoming", 4]],
    "July 11, 2024": [["status", "Canceled"]],
    "July 12, 2024": [["outgoing", 54/60]],
    "July 13, 2024": [["status", "Canceled"]],
    "July 14, 2024": [["status", "Canceled"]],
    "July 15, 2024": [["status", "Canceled"]],
    "July 16, 2024": [["status", "Canceled"], ["incoming", 15]],
    "July 17, 2024": [["status", "Canceled"]],
    "July 18, 2024": [["outgoing", 9]],
    "July 19, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 3], ["missed_by", "incoming"], ["status", "Canceled"]],
    "July 21, 2024": [["status", "Canceled"]],
    "July 22, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "July 23, 2024": [["status", "Canceled"]],
    "July 24, 2024": [["status", "Canceled"], ["incoming", 40]],
    "July 25, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "July 26, 2024": [["outgoing", 18/60]],
    "July 27, 2024": [["status", "Canceled"], ["incoming", 22], ["missed_by", "incoming"], ["status", "Canceled"]],
    "July 28, 2024": [["status", "Canceled"], ["status", "Canceled"], ["outgoing", 19]],
    "July 29, 2024": [["incoming", 21]],
    "July 30, 2024": [["status", "Canceled"], ["incoming", 2]],
    "August 6, 2024": [["incoming", 7]],
    "August 10, 2024": [["status", "Canceled"]],
    "August 11, 2024": [["status", "Canceled"]],
    "August 12, 2024": [["status", "Canceled"], ["missed_by", "incoming"]],
    "August 13, 2024": [["outgoing", 24], ["outgoing", 1], ["missed_by", "incoming"]],
    "August 14, 2024": [["status", "Canceled"]],
    "August 15, 2024": [["status", "Canceled"]],
    "August 16, 2024": [["outgoing", 21]],
    "August 17, 2024": [["status", "Canceled"]],
    "August 18, 2024": [["status", "Canceled"]],
    "August 19, 2024": [["otugoing", 4]],
    "August 20, 2024": [["status", "Canceled"]],
    "August 21, 2024": [["outgoing", 7]],
    "August 22, 2024": [["status", "Canceled"]],
    "August 23, 2024": [["status", "Canceled"]],
    "August 24, 2024": [["outgoing", 5], ["outgoing", 7], ["incoming", 29/60], ["status", "Canceled"], ["status", "Canceled"], ["missed_by", "incoming"], ["status", "Canceled"]],
    "August 25, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "August 26, 2024": [["status", "Canceled"]],
    "August 27, 2024": [["incoming", 25]],
    "August 28, 2024": [["status", "Canceled"]],
    "August 29, 2024": [["status", "Canceled"]],
    "August 30, 2024": [["status", "Canceled"]],
    "August 31, 2024": [["status", "Canceled"], ["missed_by", "incoming"]],
    "September 1, 2024": [["status", "Canceled"]],
    "September 2, 2024": [["status", "Canceled"], ["incoming", 14], ["incoming", 6]],
    "September 3, 2024": [["status", "Canceled"]],
    "September 4, 2024": [["status", "Canceled"]],
    "September 5, 2024": [["status", "Canceled"], ["incoming", 11]],
    "September 6, 2024": [["status", "Canceled"]],
    "September 7, 2024": [["status", "Canceled"]],
    "September 8, 2024": [["outgoing", 31]],
    "September 9, 2024": [["status", "Canceled"], ["incoming", 9], ["outgoing", 16]],
    "September 10, 2024": [["status", "Canceled"]],
    "September 11, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "September 12, 2024": [["status", "Canceled"], ["incoming", 15]],
    "September 13, 2024": [["missed_by", "incoming"], ["status", "Canceled"]],
    "September 14, 2024": [["status", "Canceled"]],
    "September 15, 2024": [["status", "Canceled"]],
    "September 16, 2024": [["status", "Canceled"], ["incoming", 17]],
    "September 17, 2024": [["status", "Canceled"]],
    "September 18, 2024": [["status", "Canceled"]],
    "September 19, 2024": [["status", "Canceled"]],
    "September 20, 2024": [["status", "Canceled"]],
    "September 21, 2024": [["status", "Canceled"], ["incoming", 3]],
    "September 22, 2024": [["status", "Canceled"]],
    "September 23, 2024": [["outgoing", 24]],
    "September 24, 2024": [["status", "Canceled"]],
    "September 25, 2024": [["status", "Canceled"], ["incoming", 12]],
    "September 26, 2024": [["outgoing", 20]],
    "September 28, 2024": [["status", "Canceled"]],
    "September 29, 2024": [["status", "Canceled"]],
    "September 30, 2024": [["outgoing", 7]],
    "October 1, 2024": [["status", "Canceled"]],
    "October 2, 2024": [["outgoing", 16], ["incoming", 28]],
    "October 3, 2024": [["status", "Canceled"]],
    "October 4, 2024": [["status", "Canceled"]],
    "October 5, 2024": [["status", "Canceled"]],
    "October 6, 2024": [["status", "Canceled"]],
    "October 7, 2024": [["status", "Canceled"]],
    "October 9, 2024": [["status", "Canceled"], ["incoming", 15]],
    "October 10, 2024": [["status", "Canceled"]],
    "October 11, 2024": [["outgoing", 4]],
    "October 12, 2024": [["outgoing", 12], ["outgoing", 9]],
    "October 13, 2024": [["status", "Canceled"]],
    "October 14, 2024": [["status", "Canceled"]],
    "October 15, 2024": [["incoming", 1], ["outgoing", 12]],
    "October 16, 2024": [["status", "Canceled"]],
    "October 17, 2024": [["status", "Canceled"]],
    "October 18, 2024": [["status", "Canceled"]],
    "October 19, 2024": [["status", "Canceled"], ["outgoing", 7], ["status", "Canceled"]],
    "October 20, 2024": [["status", "Canceled"]],
    "October 22, 2024": [["status", "Canceled"]],
    "October 23, 2024": [["status", "Canceled"]],
    "October 24, 2024": [["outgoing", 5]],
    "October 25, 2024": [["status", "Canceled"]],
    "October 26, 2024": [["status", "Canceled"]],
    "October 27, 2024": [["status", "Canceled"]],
    "October 28, 2024": [["status", "Canceled"]],
    "October 29, 2024": [["status", "Canceled"]],
    "October 30, 2024": [["status", "Canceled"], ["outgoing", 9]],
    "October 31, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 1, 2024": [["status", "Canceled"]],
    "November 2, 2024": [["status", "Canceled"]],
    "November 3, 2024": [["status", "Canceled"], ["incoming", 3]],
    "November 4, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 5, 2024": [["status", "Canceled"]],
    "November 6, 2024": [["status", "Canceled"]],
    "November 7, 2024": [["incoming", 14]],
    "November 8, 2024": [["status", "Canceled"], ["missed_by", "incoming"], ["status", "Canceled"]],
    "November 9, 2024": [["status", "Canceled"], ],
    "November 10, 2024": [
        ["status", "Canceled"],
        ["outgoing", 3],
        ["missed_by", "incoming"],
        ["incoming", 5],
        ["status", "Canceled"],
    ],
    "November 11, 2024": [["status", "Canceled"]],
    "November 12, 2024": [
        ["status", "Canceled"],
        ["incoming", 0.66],
        ["outgoing", 20],
    ],
    "November 13, 2024": [["status", "Canceled"]],
    "November 14, 2024": [["outgoing", 6]],
    "November 15, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 16, 2024": [["status", "Canceled"]],
    "November 17, 2024": [["outgoing", 12]],
    "November 18, 2024": [["status", "Canceled"]],
    "November 20, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 22, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 23, 2024": [["status", "Canceled"]],
    "November 24, 2024": [["status", "Canceled"]],
    "November 26, 2024": [["outgoing", 4]],
    "November 27, 2024": [["status", "Canceled"], ["outgoing", 7]],
    "November 28, 2024": [["status", "Canceled"]],
    "November 29, 2024": [["status", "Canceled"], ["status", "Canceled"]],
    "November 30, 2024": [["status", "Canceled"]],
    "December 1, 2024": [["outgoing", 29]],
    "December 2, 2024": [["status", "Canceled"]],
    "December 3, 2024": [["status", "Canceled"]],
    "December 5, 2024": [["status", "Canceled"]],
    "December 6, 2024": [["status", "Canceled"]],
    "December 7, 2024": [["status", "Canceled"]],
    "December 8, 2024": [["status", "Canceled"]],
    "December 9, 2024": [["outgoing", 8]],
    "December 10, 2024": [["status", "Canceled"]],
    "December 11, 2024": [["status", "Canceled"]],
    "December 12, 2024": [["status", "Canceled"]],
    "December 13, 2024": [["status", "Canceled"]],
    "December 14, 2024": [["status", "Canceled"]],
    "December 15, 2024": [["status", "Canceled"]],
    "December 16, 2024": [["status", "Canceled"]],
    "December 17, 2024": [["status", "Canceled"]],
    "December 18, 2024": [["status", "Canceled"]],
    "December 19, 2024": [["status", "Canceled"], ["incoming", 13]],
    "December 20, 2024": [["status", "Canceled"]],
    "December 21, 2024": [["status", "Canceled"]],
    "December 22, 2024": [["status", "Canceled"]],
    "December 23, 2024": [["status", "Canceled"]],
    "December 24, 2024": [["status", "Canceled"]],
    "December 25, 2024": [["status", "Canceled"], ["status", "Canceled"], ["status", "Canceled"], ["incoming", 1]],
    "December 26, 2024": [["status", "Canceled"]],
    "December 27, 2024": [["outgoing", 29]],
    "December 28, 2024": [["missed_by", "incoming"], ["status", "Canceled"]],
    "December 29, 2024": [["outgoing", 8]],
    "December 30, 2024": [["status", "Canceled"]],
    "December 31, 2024": [["status", "Canceled"]],
    "January 1, 2024": [["status", "Canceled"]],
    "January 3, 2024": [["outgoing", 45]],
    "January 4, 2024": [["status", "Canceled"]],
    "January 5, 2024": [["missed_by", "incoming"]],
        };
        
        // Process the call data into a structured format for calendar rendering
        function processCallData(rawData) {
            const processedData = {};
            
            // Convert date strings to Date objects and organize by year/month/day
            Object.keys(rawData).forEach(dateString => {
                const date = new Date(dateString);
                const year = date.getFullYear();
                const month = date.getMonth();
                const day = date.getDate();
                
                // Initialize nested structure if needed
                if (!processedData[year]) {
                    processedData[year] = {};
                }
                if (!processedData[year][month]) {
                    processedData[year][month] = {};
                }
                
                // Store the calls data for this day
                processedData[year][month][day] = rawData[dateString];
            });
            
            return processedData;
        }
        
        // Generate HTML for a month calendar
        function generateMonthCalendar(year, month, processedData) {
            const monthData = processedData[year] && processedData[year][month] 
                ? processedData[year][month] 
                : {};
            
            const monthNames = [
                "January", "February", "March", "April", "May", "June",
                "July", "August", "September", "October", "November", "December"
            ];
            
            // Start building the calendar HTML
            let calendarHTML = `
                <div class="calendar-container">
                    <div class="calendar-header">
                        <h2>${monthNames[month]} ${year}</h2>
                    </div>
                    <table class="calendar-table">
                        <thead>
                            <tr>
                                <th>Sun</th><th>Mon</th><th>Tue</th><th>Wed</th>
                                <th>Thu</th><th>Fri</th><th>Sat</th>
                            </tr>
                        </thead>
                        <tbody>
            `;
            
            // Get first day of the month and number of days
            const firstDayOfMonth = new Date(year, month, 1).getDay();
            const daysInMonth = new Date(year, month + 1, 0).getDate();
            
            // Start with empty cells for days before the first of the month
            let dayCount = 0;
            calendarHTML += '<tr>';
            
            for (let i = 0; i < firstDayOfMonth; i++) {
                calendarHTML += '<td></td>';
                dayCount++;
            }
            
            // Add cells for each day of the month
            for (let day = 1; day <= daysInMonth; day++) {
                // If we're at the start of a new week, create a new row
                if (dayCount % 7 === 0) {
                    calendarHTML += '</tr><tr>';
                }
                
                // Get call data for this day
                const dayData = monthData[day] || [];
                
                // Calculate call statistics
                const canceledCalls = dayData.filter(call => call[0] === "status" && call[1] === "Canceled").length;
                const incomingCalls = dayData.filter(call => call[0] === "incoming").length;
                const outgoingCalls = dayData.filter(call => call[0] === "outgoing").length;
                
                // Count missed calls by type
                const missedIncomingCalls = dayData.filter(call => call[0] === "missed_by" && call[1] === "incoming").length;
                const missedOutgoingCalls = dayData.filter(call => call[0] === "missed_by" && call[1] === "outgoing").length;
                
                // Calculate durations
                const incomingDuration = dayData
                    .filter(call => call[0] === "incoming")
                    .reduce((sum, call) => sum + call[1], 0);
                
                const outgoingDuration = dayData
                    .filter(call => call[0] === "outgoing")
                    .reduce((sum, call) => sum + call[1], 0);
                
                // Create the day cell content
                let cellContent = `<div class="day-number">${day}</div>`;
                
                // Check if this day is a holiday
                const monthStr = month + 1; // Convert 0-based month to 1-based
                const dateKey = `${monthStr}/${day}`;
                const yearDateKey = `${year}/${monthStr}/${day}`;
                const holidays = getHolidays(year);

                if (holidays[dateKey] || holidays[yearDateKey]) {
                    const holidayName = holidays[yearDateKey] || holidays[dateKey];
                    cellContent += `<div class="holiday">${holidayName}</div>`;
                }
                
                if (dayData.length > 0) {
                    cellContent += '<div class="call-summary">';
                    
                    if (canceledCalls > 0) {
                        cellContent += `<div class="canceled">C: ${canceledCalls}</div>`;
                    }
                    
                    if (incomingCalls > 0) {
                        cellContent += `<div class="incoming">I: ${incomingCalls} (${formatDuration(incomingDuration)})</div>`;
                    }
                    
                    if (outgoingCalls > 0) {
                        cellContent += `<div class="outgoing">O: ${outgoingCalls} (${formatDuration(outgoingDuration)})</div>`;
                    }
                    
                    if (missedIncomingCalls > 0) {
                        cellContent += `<div class="missed-incoming">MI: ${missedIncomingCalls}</div>`;
                    }
                    
                    if (missedOutgoingCalls > 0) {
                        cellContent += `<div class="missed-outgoing">MO: ${missedOutgoingCalls}</div>`;
                    }
                    
                    cellContent += '</div>';
                }
                
                // Add the day cell to the calendar
                calendarHTML += `<td class="calendar-day">${cellContent}</td>`;
                dayCount++;
            }
            
            // Add empty cells for days after the end of the month
            while (dayCount % 7 !== 0) {
                calendarHTML += '<td></td>';
                dayCount++;
            }
            
            // Close the last row and table
            calendarHTML += `
                        </tr>
                        </tbody>
                    </table>
                    <div class="calendar-legend">
                        <div><strong>Legend:</strong></div>
                        <div>C: Canceled calls</div>
                        <div>I: Incoming calls (with duration)</div>
                        <div>O: Outgoing calls (with duration)</div>
                        <div>MI: Missed incoming calls (you missed their call)</div>
                        <div>MO: Missed outgoing calls (they missed your call)</div>
                    </div>
                </div>
            `;
            
            return calendarHTML;
        }
        
        // Create a calendar controller to handle navigation and rendering
        function CalendarController() {
            // Initialize with the processed data
            const processedData = processCallData(call_data);
            
            // Start with December 2023 (or the earliest date in the data)
            let currentYear = 2023;
            let currentMonth = 11; // 0-based month (December is 11)
            
            // Get the container element where the calendar will be rendered
            const container = document.getElementById('calendar-container');
            if (!container) {
                console.error('Calendar container element not found!');
                return;
            }
            
            // Method to render the current month
            function renderCurrentMonth() {
                const calendarHTML = generateMonthCalendar(currentYear, currentMonth, processedData);
                container.innerHTML = calendarHTML;
                
                // Add navigation buttons
                const header = container.querySelector('.calendar-header');
                
                const navButtons = document.createElement('div');
                navButtons.className = 'calendar-nav';
                
                const prevButton = document.createElement('button');
                prevButton.innerText = 'Previous Month';
                prevButton.onclick = navigatePrevMonth;
                
                const nextButton = document.createElement('button');
                nextButton.innerText = 'Next Month';
                nextButton.onclick = navigateNextMonth;
                
                navButtons.appendChild(prevButton);
                navButtons.appendChild(nextButton);
                header.appendChild(navButtons);
            }
            
            // Navigation methods
            function navigatePrevMonth() {
                currentMonth--;
                if (currentMonth < 0) {
                    currentMonth = 11;
                    currentYear--;
                }
                renderCurrentMonth();
            }
            
            function navigateNextMonth() {
                currentMonth++;
                if (currentMonth > 11) {
                    currentMonth = 0;
                    currentYear++;
                }
                renderCurrentMonth();
            }
            
            // Apply CSS styles for the calendar
            function applyStyles() {
                const style = document.createElement('style');
                style.textContent = `
                    .calendar-container {
                        font-family: Arial, sans-serif;
                        max-width: 1000px;
                        margin: 0 auto;
                    }
                    
                    .calendar-header {
                        display: flex;
                        justify-content: space-between;
                        align-items: center;
                        margin-bottom: 20px;
                    }
                    
                    .calendar-nav {
                        display: flex;
                        gap: 10px;
                    }
                    
                    .calendar-nav button {
                        padding: 8px 16px;
                        background-color: #f0f0f0;
                        border: 1px solid #ddd;
                        border-radius: 4px;
                        cursor: pointer;
                    }
                    
                    .calendar-nav button:hover {
                        background-color: #e0e0e0;
                    }
                    
                    .calendar-table {
                        width: 100%;
                        border-collapse: collapse;
                    }
                    
                    .calendar-table th, .calendar-table td {
                        border: 1px solid #ddd;
                        padding: 8px;
                        text-align: left;
                        vertical-align: top;
                    }
                    
                    .calendar-table th {
                        background-color: #f5f5f5;
                        text-align: center;
                    }
                    
                    .calendar-day {
                        min-height: 80px;
                        position: relative;
                    }
                    
                    .day-number {
                        font-weight: bold;
                        margin-bottom: 5px;
                    }
                    
                    .holiday {
                        color: #e91e63;
                        font-weight: bold;
                        font-size: 11px;
                        margin-bottom: 3px;
                        background-color: #ffebee;
                        padding: 2px 4px;
                        border-radius: 3px;
                        display: inline-block;
                    }
                    
                    .call-summary {
                        font-size: 12px;
                    }
                    
                    .canceled {
                        color: #ff0000;
                    }
                    
                    .incoming {
                        color: #008800;
                    }
                    
                    .outgoing {
                        color: #0000cc;
                    }
                    
                    .missed-incoming {
                        color: #9933cc;
                    }
                    
                    .missed-outgoing {
                        color: #cc6600;
                    }
                    
                    .calendar-legend {
                        margin-top: 20px;
                        font-size: 14px;
                    }
                `;
                document.head.appendChild(style);
            }
            
            // Initialize the calendar
            function init() {
                applyStyles();
                renderCurrentMonth();
            }
            
            // Return public methods
            return {
                init,
                navigateNextMonth,
                navigatePrevMonth
            };
        }
        
        // Initialize when the DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            const calendarController = CalendarController();
            calendarController.init();
        });
    </script>
</body>
</html>